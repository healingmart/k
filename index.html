400 에러가 발생하는 것을 보니 `detailCommon` operation이 서버에서 지원되지 않는 것 같습니다. 서버 코드를 확인해보겠습니다.

## **api/lib/client.js 수정 (detailCommon 파라미터 수정)**

```javascript
/**
 * 관광 API 클라이언트
 */

const { CONFIG, API_ERROR_CODES } = require('./config');
const { sanitizeInput, safeParseFloat, safeParseInt } = require('./security');

// 간단한 메모리 캐시
const cache = new Map();

/**
 * 캐시 정리
 */
function cleanupCache() {
  const now = Date.now();
  for (const [key, data] of cache.entries()) {
    if (now > data.expiry) {
      cache.delete(key);
    }
  }
  
  if (cache.size > CONFIG.MAX_CACHE_SIZE) {
    const entries = Array.from(cache.entries());
    entries.sort((a, b) => a[1].timestamp - b[1].timestamp);
    cache.delete(entries[0][0]);
  }
}

/**
 * API 에러 클래스
 */
class ApiError extends Error {
  constructor(message, code = 'API_ERROR', statusCode = 500, details = {}) {
    super(message);
    this.name = 'ApiError';
    this.code = code;
    this.statusCode = statusCode;
    this.details = details;
    this.timestamp = new Date().toISOString();
  }
  
  toJSON() {
    return {
      success: false,
      error: {
        name: this.name,
        code: this.code,
        message: this.message,
        statusCode: this.statusCode,
        details: this.details,
        timestamp: this.timestamp
      }
    };
  }
}

/**
 * 관광 API 클라이언트
 */
class TourismApiClient {
  constructor() {
    // 환경변수에서 API 키 가져오기
    this.apiKey = process.env.TOURISM_API_KEY;
    
    if (!this.apiKey) {
      throw new ApiError(
        'TOURISM_API_KEY 환경변수가 설정되지 않았습니다.',
        'MISSING_API_KEY',
        500
      );
    }
    
    this.baseURL = CONFIG.API_BASE_URL;
  }
  
  /**
   * 기본 파라미터
   */
  buildBaseParams(params = {}) {
    return {
      serviceKey: this.apiKey,
      MobileOS: 'ETC',
      MobileApp: 'TourismAPI',
      _type: 'json',
      ...params
    };
  }
  
  /**
   * 캐시 키 생성
   */
  generateCacheKey(operation, params) {
    const sortedParams = Object.keys(params).sort().reduce((result, key) => {
      result[key] = params[key];
      return result;
    }, {});
    return `${operation}:${JSON.stringify(sortedParams)}`;
  }
  
  /**
   * API 요청 실행
   */
  async makeRequest(endpoint, params = {}, operation = 'unknown') {
    const fullParams = this.buildBaseParams(params);
    const cacheKey = this.generateCacheKey(operation, fullParams);
    
    // 캐시 확인
    const cached = cache.get(cacheKey);
    if (cached && Date.now() < cached.expiry) {
      return cached.data;
    }
    
    // 캐시 정리
    if (cache.size > CONFIG.MAX_CACHE_SIZE) {
      cleanupCache();
    }
    
    // URL 생성
    const queryString = new URLSearchParams(fullParams).toString();
    const url = `${this.baseURL}${endpoint}?${queryString}`;
    
    try {
      // API 호출
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), CONFIG.REQUEST_TIMEOUT);
      
      const response = await fetch(url, {
        method: 'GET',
        signal: controller.signal
      });
      
      clearTimeout(timeoutId);
      
      if (!response.ok) {
        throw new ApiError(
          `API 호출 실패: ${response.status} ${response.statusText}`,
          'HTTP_ERROR',
          response.status
        );
      }
      
      const data = await response.json();
      
      // API 응답 검증
      if (data.response?.header?.resultCode !== '0000') {
        const resultCode = data.response?.header?.resultCode || '99';
        const errorCode = API_ERROR_CODES[resultCode] || 'API_ERROR';
        throw new ApiError(
          data.response?.header?.resultMsg || '알 수 없는 오류',
          errorCode,
          400,
          { resultCode, resultMsg: data.response?.header?.resultMsg }
        );
      }
      
      // 성공 응답 처리
      const result = data.response?.body || data;
      
      // 캐시 저장
      cache.set(cacheKey, {
        data: result,
        expiry: Date.now() + CONFIG.CACHE_TTL,
        timestamp: Date.now()
      });
      
      return result;
      
    } catch (error) {
      if (error.name === 'AbortError') {
        throw new ApiError('API 요청 시간 초과', 'TIMEOUT', 504);
      }
      if (error instanceof ApiError) {
        throw error;
      }
      throw new ApiError(
        `네트워크 오류: ${error.message}`,
        'NETWORK_ERROR',
        500,
        { originalError: error.message }
      );
    }
  }
  
  /**
   * 지역 기반 관광정보 조회
   */
  async areaBasedList(params = {}) {
    const validatedParams = {
      numOfRows: safeParseInt(params.numOfRows, 10),
      pageNo: safeParseInt(params.pageNo, 1),
      ...params
    };
    
    return this.makeRequest('/areaBasedList2', validatedParams, 'areaBasedList');
  }
  
  /**
   * 상세 정보 조회
   */
  async detailCommon(params = {}) {
    if (!params.contentId) {
      throw new ApiError('contentId는 필수 파라미터입니다.', 'VALIDATION_ERROR', 400);
    }
    
    // 파라미터 정리 - 불필요한 파라미터 제거
    const validatedParams = {
      contentId: params.contentId,
      contentTypeId: params.contentTypeId,
      defaultYN: params.defaultYN || 'Y',
      firstImageYN: params.firstImageYN || 'Y',
      areacodeYN: params.areacodeYN || 'Y',
      catcodeYN: params.catcodeYN || 'Y',
      addrinfoYN: params.addrinfoYN || 'Y',
      mapinfoYN: params.mapinfoYN || 'Y',
      overviewYN: params.overviewYN || 'Y'
    };
    
    return this.makeRequest('/detailCommon2', validatedParams, 'detailCommon');
  }
  
  /**
   * 키워드 검색
   */
  async searchKeyword(params = {}) {
    if (!params.keyword) {
      throw new ApiError('keyword는 필수 파라미터입니다.', 'VALIDATION_ERROR', 400);
    }
    
    const validatedParams = {
      numOfRows: safeParseInt(params.numOfRows, 10),
      pageNo: safeParseInt(params.pageNo, 1),
      keyword: sanitizeInput(params.keyword, 100),
      ...params
    };
    
    return this.makeRequest('/searchKeyword2', validatedParams, 'searchKeyword');
  }
  
  /**
   * 위치 기반 관광정보 조회
   */
  async locationBasedList(params = {}) {
    if (!params.mapX || !params.mapY) {
      throw new ApiError('mapX와 mapY는 필수 파라미터입니다.', 'VALIDATION_ERROR', 400);
    }
    
    const lat = safeParseFloat(params.mapY);
    const lng = safeParseFloat(params.mapX);
    
    if (isNaN(lat) || isNaN(lng)) {
      throw new ApiError('유효하지 않은 좌표값입니다.', 'VALIDATION_ERROR', 400);
    }
    
    // 한국 좌표 범위 검증
    if (lat < 33 || lat > 43 || lng < 124 || lng > 132) {
      throw new ApiError(
        `좌표값이 한국 범위를 벗어났습니다. (위도: ${lat}, 경도: ${lng})`,
        'VALIDATION_ERROR',
        400
      );
    }
    
    const validatedParams = {
      numOfRows: safeParseInt(params.numOfRows, 10),
      pageNo: safeParseInt(params.pageNo, 1),
      mapX: lng,
      mapY: lat,
      radius: safeParseInt(params.radius, 1000),
      ...params
    };
    
    const result = await this.makeRequest('/locationBasedList2', validatedParams, 'locationBasedList');
    
    // 거리 정보 추가 (선택사항)
    if (params.addDistance === 'Y' && result.items?.item) {
      const items = Array.isArray(result.items.item) ? result.items.item : [result.items.item];
      
      result.items.item = items.map(item => {
        const itemLat = safeParseFloat(item.mapy);
        const itemLng = safeParseFloat(item.mapx);
        
        if (!isNaN(itemLat) && !isNaN(itemLng)) {
          const distance = this.calculateDistance(lat, lng, itemLat, itemLng);
          return { ...item, distance };
        }
        
        return item;
      }).sort((a, b) => (a.distance || 999999) - (b.distance || 999999));
    }
    
    return result;
  }
  
  /**
   * 거리 계산 (미터 단위)
   */
  calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371e3; // 지구 반지름 (미터)
    const φ1 = (lat1 * Math.PI) / 180;
    const φ2 = (lat2 * Math.PI) / 180;
    const Δφ = ((lat2 - lat1) * Math.PI) / 180;
    const Δλ = ((lon2 - lon1) * Math.PI) / 180;
    
    const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +
              Math.cos(φ1) * Math.cos(φ2) *
              Math.sin(Δλ / 2) * Math.sin(Δλ / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    
    return Math.round(R * c);
  }
}

/**
 * Rate Limiter
 */
const rateLimitMap = new Map();

function checkRateLimit(identifier) {
  const now = Date.now();
  const windowStart = now - CONFIG.RATE_LIMIT_WINDOW;
  
  const requests = rateLimitMap.get(identifier) || [];
  const validRequests = requests.filter(time => time > windowStart);
  
  if (validRequests.length >= CONFIG.RATE_LIMIT_MAX) {
    return {
      allowed: false,
      remaining: 0,
      resetTime: new Date(validRequests[0] + CONFIG.RATE_LIMIT_WINDOW).toISOString()
    };
  }
  
  validRequests.push(now);
  rateLimitMap.set(identifier, validRequests);
  
  // 메모리 정리
  if (rateLimitMap.size > 1000) {
    for (const [key, reqs] of rateLimitMap.entries()) {
      if (reqs.length === 0 || reqs[reqs.length - 1] < windowStart) {
        rateLimitMap.delete(key);
      }
    }
  }
  
  return {
    allowed: true,
    remaining: CONFIG.RATE_LIMIT_MAX - validRequests.length
  };
}

module.exports = {
  TourismApiClient,
  ApiError,
  checkRateLimit
};
```

서버 코드를 수정한 후 재배포하고, 그 동안 HTML의 상세 정보 부분을 간단하게 수정해서 사용하세요:

## **수정된 HTML (상세 정보 간소화)**

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관광지 탐색기</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        /* 검색 영역 */
        .search-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .search-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .search-group input, .search-group select {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            min-width: 150px;
        }
        
        .search-group button {
            padding: 12px 30px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        
        .search-group button:hover {
            background: #0056b3;
        }
        
        .search-group button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        /* 탭 메뉴 */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #007bff;
            border-bottom: 2px solid #007bff;
        }
        
        /* 카드 그리드 */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }
        
        .card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: #f0f0f0;
        }
        
        .no-image {
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 48px;
        }
        
        .card-content {
            padding: 15px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .card-info {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .card-distance {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .card-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            text-align: center;
            text-decoration: none;
            color: white;
        }
        
        .btn-map {
            background: #4CAF50;
        }
        
        .btn-detail {
            background: #2196F3;
        }
        
        /* 로딩 상태 */
        .loading {
            text-align: center;
            padding: 40px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 수동 입력 영역 */
        details {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        summary {
            cursor: pointer;
            font-weight: bold;
            color: #666;
        }
        
        .manual-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .manual-input input {
            flex: 1;
            min-width: 120px;
        }
        
        /* 디버그 정보 */
        .debug-info {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            font-family: monospace;
            margin-top: 10px;
        }
        
        /* 반응형 */
        @media (max-width: 768px) {
            .card-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🗺️ 대한민국 관광지 탐색기</h1>
        
        <div class="search-section">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('keyword')">키워드 검색</button>
                <button class="tab" onclick="switchTab('location')">내 주변</button>
                <button class="tab" onclick="switchTab('area')">지역별</button>
            </div>
            
            <!-- 키워드 검색 -->
            <div id="keyword-search" class="search-group">
                <input type="text" id="keyword" placeholder="관광지 검색 (예: 경복궁, 해수욕장)" value="제주">
                <button onclick="searchByKeyword()">검색</button>
            </div>
            
            <!-- 위치 기반 검색 -->
            <div id="location-search" class="search-group" style="display:none;">
                <button onclick="getMyLocation()">📍 내 위치 찾기</button>
                <input type="number" id="radius" placeholder="반경(m)" value="5000" min="1000" max="20000">
                <button onclick="searchNearby()">주변 검색</button>
                
                <details style="width: 100%;">
                    <summary>수동 좌표 입력 / 테스트 위치</summary>
                    <div class="manual-input">
                        <input type="text" id="manual-lat" placeholder="위도 (예: 37.5665)">
                        <input type="text" id="manual-lng" placeholder="경도 (예: 126.9780)">
                        <button onclick="setManualLocation()">좌표 설정</button>
                    </div>
                    <div style="margin-top: 10px;">
                        <button onclick="setTestLocation('서울')">📍 서울시청</button>
                        <button onclick="setTestLocation('부산')">📍 부산역</button>
                        <button onclick="setTestLocation('제주')">📍 제주공항</button>
                    </div>
                    <div id="location-debug" class="debug-info" style="display:none;"></div>
                </details>
            </div>
            
            <!-- 지역별 검색 -->
            <div id="area-search" class="search-group" style="display:none;">
                <select id="areaCode">
                    <option value="1">서울</option>
                    <option value="6">부산</option>
                    <option value="4">대구</option>
                    <option value="2">인천</option>
                    <option value="5">광주</option>
                    <option value="3">대전</option>
                    <option value="7">울산</option>
                    <option value="8">세종</option>
                    <option value="31">경기</option>
                    <option value="32">강원</option>
                    <option value="33">충북</option>
                    <option value="34">충남</option>
                    <option value="35">경북</option>
                    <option value="36">경남</option>
                    <option value="37">전북</option>
                    <option value="38">전남</option>
                    <option value="39" selected>제주</option>
                </select>
                <select id="contentType">
                    <option value="">전체</option>
                    <option value="12">관광지</option>
                    <option value="14">문화시설</option>
                    <option value="15">축제/공연</option>
                    <option value="25">여행코스</option>
                    <option value="28">레포츠</option>
                    <option value="32">숙박</option>
                    <option value="38">쇼핑</option>
                    <option value="39">음식점</option>
                </select>
                <button onclick="searchByArea()">검색</button>
            </div>
        </div>
        
        <div id="loading" class="loading" style="display:none;">
            <div class="spinner"></div>
            <p>검색 중...</p>
        </div>
        
        <div id="results" class="card-grid"></div>
    </div>
    
    <script>
        const API_URL = 'https://k-ivory.vercel.app/api/tourism';
        let currentTab = 'keyword';
        let userLocation = null;
        let currentItems = []; // 현재 검색 결과 저장
        
        // 탭 전환
        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('keyword-search').style.display = tab === 'keyword' ? 'flex' : 'none';
            document.getElementById('location-search').style.display = tab === 'location' ? 'flex' : 'none';
            document.getElementById('area-search').style.display = tab === 'area' ? 'flex' : 'none';
        }
        
        // 로딩 표시
        function showLoading(show = true) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
            document.getElementById('results').style.display = show ? 'none' : 'grid';
        }
        
        // 키워드 검색
        async function searchByKeyword() {
            const keyword = document.getElementById('keyword').value;
            if (!keyword) {
                alert('검색어를 입력하세요');
                return;
            }
            
            showLoading(true);
            
            try {
                const response = await fetch(`${API_URL}?operation=searchKeyword&keyword=${encodeURIComponent(keyword)}&numOfRows=20`);
                const data = await response.json();
                
                if (data.success) {
                    currentItems = data.data.items?.item || [];
                    displayResults(currentItems);
                } else {
                    alert('검색 실패: ' + data.error.message);
                }
            } catch (error) {
                alert('오류 발생: ' + error.message);
            } finally {
                showLoading(false);
            }
        }
        
        // 내 위치 가져오기
        function getMyLocation() {
            if (!navigator.geolocation) {
                alert('위치 서비스를 지원하지 않는 브라우저입니다.');
                return;
            }
            
            const button = event.target;
            button.textContent = '📍 위치 찾는 중...';
            button.disabled = true;
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    userLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
                    
                    updateLocationDebug();
                    alert(`위치를 찾았습니다!\n위도: ${userLocation.lat.toFixed(6)}\n경도: ${userLocation.lng.toFixed(6)}`);
                    
                    button.textContent = '📍 내 위치 찾기';
                    button.disabled = false;
                },
                (error) => {
                    let errorMessage = '위치를 찾을 수 없습니다: ';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += '위치 권한이 거부되었습니다.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += '위치 정보를 사용할 수 없습니다.';
                            break;
                        case error.TIMEOUT:
                            errorMessage += '위치 요청 시간이 초과되었습니다.';
                            break;
                        default:
                            errorMessage += error.message;
                    }
                    alert(errorMessage);
                    
                    button.textContent = '📍 내 위치 찾기';
                    button.disabled = false;
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }
        
        // 주변 검색
        async function searchNearby() {
            if (!userLocation) {
                alert('먼저 내 위치 찾기를 클릭하거나 수동으로 좌표를 입력하세요');
                return;
            }
            
            const radius = document.getElementById('radius').value;
            
            console.log('검색 파라미터:', {
                mapX: userLocation.lng,
                mapY: userLocation.lat,
                radius: radius
            });
            
            showLoading(true);
            
            try {
                const url = `${API_URL}?operation=locationBasedList&mapX=${userLocation.lng}&mapY=${userLocation.lat}&radius=${radius}&numOfRows=20`;
                console.log('요청 URL:', url);
                
                const response = await fetch(url);
                const data = await response.json();
                console.log('응답 데이터:', data);
                
                if (data.success) {
                    const items = data.data.items?.item || [];
                    if (items.length === 0) {
                        alert(`반경 ${radius}m 내에 관광지가 없습니다.\n반경을 늘려보세요.`);
                    } else {
                        // 거리 계산 추가
                        const itemsWithDistance = items.map(item => {
                            const itemLat = parseFloat(item.mapy);
                            const itemLng = parseFloat(item.mapx);
                            if (!isNaN(itemLat) && !isNaN(itemLng)) {
                                item.distance = calculateDistance(userLocation.lat, userLocation.lng, itemLat, itemLng);
                            }
                            return item;
                        }).sort((a, b) => (a.distance || 999999) - (b.distance || 999999));
                        
                        currentItems = itemsWithDistance;
                        displayResults(itemsWithDistance, true);
                    }
                } else {
                    alert('검색 실패: ' + (data.error?.message || '알 수 없는 오류'));
                    console.error('API 오류:', data.error);
                }
            } catch (error) {
                alert('오류 발생: ' + error.message);
                console.error('네트워크 오류:', error);
            } finally {
                showLoading(false);
            }
        }
        
        // 수동 좌표 설정
        function setManualLocation() {
            const lat = parseFloat(document.getElementById('manual-lat').value);
            const lng = parseFloat(document.getElementById('manual-lng').value);
            
            if (isNaN(lat) || isNaN(lng)) {
                alert('올바른 좌표를 입력하세요');
                return;
            }
            
            if (lat < 33 || lat > 43 || lng < 124 || lng > 132) {
                alert('한국 범위를 벗어난 좌표입니다\n위도: 33~43\n경도: 124~132');
                return;
            }
            
            userLocation = { lat, lng };
            updateLocationDebug();
            alert(`좌표가 설정되었습니다!\n위도: ${lat}\n경도: ${lng}`);
        }
        
        // 테스트 위치 설정
        function setTestLocation(city) {
            const locations = {
                '서울': { lat: 37.5665, lng: 126.9780, name: '서울시청' },
                '부산': { lat: 35.1153, lng: 129.0413, name: '부산역' },
                '제주': { lat: 33.5066, lng: 126.4926, name: '제주공항' }
            };
            
            const loc = locations[city];
            userLocation = { lat: loc.lat, lng: loc.lng };
            
            document.getElementById('manual-lat').value = loc.lat;
            document.getElementById('manual-lng').value = loc.lng;
            
            updateLocationDebug();
            alert(`${loc.name} 좌표가 설정되었습니다!`);
        }
        
        // 위치 디버그 정보 업데이트
        function updateLocationDebug() {
            if (userLocation) {
                const debugDiv = document.getElementById('location-debug');
                debugDiv.style.display = 'block';
                debugDiv.innerHTML = `
                    <strong>현재 설정된 위치:</strong><br>
                    위도(lat/mapY): ${userLocation.lat}<br>
                    경도(lng/mapX): ${userLocation.lng}<br>
                    <a href="https://map.kakao.com/link/map/내위치,${userLocation.lat},${userLocation.lng}" target="_blank">카카오맵에서 확인</a>
                `;
            }
        }
        
        // 거리 계산 함수
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371e3; // 지구 반지름 (미터)
            const φ1 = lat1 * Math.PI / 180;
            const φ2 = lat2 * Math.PI / 180;
            const Δφ = (lat2 - lat1) * Math.PI / 180;
            const Δλ = (lon2 - lon1) * Math.PI / 180;
            
            const a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +
                      Math.cos(φ1) * Math.cos(φ2) *
                      Math.sin(Δλ/2) * Math.sin(Δλ/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            
            return Math.round(R * c); // 미터 단위
        }
        
        // 지역별 검색
        async function searchByArea() {
            const areaCode = document.getElementById('areaCode').value;
            const contentType = document.getElementById('contentType').value;
            
            showLoading(true);
            
            try {
                let url = `${API_URL}?operation=areaBasedList&areaCode=${areaCode}&numOfRows=20`;
                if (contentType) {
                    url += `&contentTypeId=${contentType}`;
                }
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success) {
                    currentItems = data.data.items?.item || [];
                    displayResults(currentItems);
                } else {
                    alert('검색 실패: ' + data.error.message);
                }
            } catch (error) {
                alert('오류 발생: ' + error.message);
            } finally {
                showLoading(false);
            }
        }
        
        // 결과 표시 (상세 정보 없이)
        function displayResults(items, showDistance = false) {
            const resultsDiv = document.getElementById('results');
            
            if (!items || items.length === 0) {
                resultsDiv.innerHTML = '<p style="text-align:center; grid-column: 1/-1;">검색 결과가 없습니다.</p>';
                return;
            }
            
            // 배열이 아닌 경우 배열로 변환
            if (!Array.isArray(items)) {
                items = [items];
            }
            
            resultsDiv.innerHTML = items.map((item, index) => `
                <div class="card" data-index="${index}">
                    ${item.firstimage ? 
                        `<img src="${item.firstimage}" alt="${item.title}" class="card-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                         <div class="no-image" style="display:none;">📷</div>` : 
                        `<div class="card-image no-image">📷</div>`
                    }
                    <div class="card-content">
                        <h3 class="card-title">${item.title}</h3>
                        <p class="card-info">📍 ${item.addr1 || '주소 정보 없음'}</p>
                        ${item.tel ? `<p class="card-info">📞 ${item.tel}</p>` : ''}
                        ${showDistance && item.distance ? 
                            `<span class="card-distance">${formatDistance(item.distance)}</span>` : ''
                        }
                        <div class="card-actions">
                            <a href="https://map.kakao.com/link/map/${item.title},${item.mapy},${item.mapx}" 
                               target="_blank" 
                               class="card-btn btn-map"
                               onclick="event.stopPropagation()">
                                지도보기
                            </a>
                            <a href="https://map.kakao.com/link/to/${item.title},${item.mapy},${item.mapx}" 
                               target="_blank" 
                               class="card-btn btn-detail"
                               onclick="event.stopPropagation()">
                                길찾기
                            </a>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // 거리 포맷
        function formatDistance(meters) {
            if (meters < 1000) {
                return `${meters}m`;
            }
            return `${(meters / 1000).toFixed(1)}km`;
        }
        
        // 엔터키 이벤트
        document.getElementById('keyword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') searchByKeyword();
        });
        
        // 페이지 로드 시 제주 검색
        window.addEventListener('load', function() {
            searchByKeyword();
        });
    </script>
</body>
</html>
```

이제 상세 정보 모달 없이 카드에서 바로 지도보기와 길찾기가 가능합니다!
